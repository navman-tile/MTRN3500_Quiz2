using namespace System;

#pragma pack(push, 4)
struct GNSS
{
	unsigned int Header; // 4 bytes 0xAA 0x44 0x12 0x1C
	unsigned char Discard1[40];
	double Northing; //starting byte location: 44
	double Easting; //starting byte location: 52
	double Height; //starting byte location: 60
	unsigned char Discard2[40];
	unsigned int CRC; //starting byte location: 108
};
#pragma pack(pop, 4)

int main()
{
	array<unsigned char>^ GNSSData = gcnew array<unsigned char>{// Two data records: 112 x 2 = 224
			0xaa, 0x44, 0x12, 0x1c, 0xd6, 0x02, 0x02, 0x20, 0x50, 0x00, 0x00, 0x00, 0x64,
			0xb4, 0x94, 0x05, 0xf6, 0xc4, 0x39, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x8c, 0xef,
			0x81, 0x08, 0x00, 0x00, 0x00, 0x00, 0x32, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00,
			0x00, 0x48, 0x00, 0x00, 0x00, 0x5c, 0x8f, 0xc2, 0x35, 0x19, 0xd3, 0x57, 0x41,
			0x85, 0xeb, 0x51, 0xb8, 0x3f, 0x8a, 0x14, 0x41, 0x66, 0x66, 0x66, 0x66, 0x66,
			0x46, 0x48, 0x40, 0x81, 0x7c, 0xa5, 0x41, 0x3d, 0x00, 0x00, 0x00, 0x07, 0xb1,
			0x8a, 0x3c, 0xf4, 0x39, 0x03, 0x3d, 0x4c, 0xd7, 0x30, 0x3d, 0x41, 0x41, 0x41,
			0x41, 0xcd, 0xcc, 0xac, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x09, 0x07, 0x07, 0x07,
			0x00, 0x00, 0x00, 0x00, 0x04, 0xa3, 0xfd, 0xcc, 0xaa, 0x44, 0x12, 0x1c, 0xd6,
			0x02, 0x02, 0x20, 0x50, 0x00, 0x00, 0x00, 0x64, 0xb4, 0x94, 0x05, 0x5a, 0xc5,
			0x39, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x8c, 0xef, 0x81, 0x08, 0x00, 0x00, 0x00,
			0x00, 0x32, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x48, 0x00, 0x00, 0x00,
			0x5c, 0x8f, 0xc3, 0x35, 0x19, 0xd3, 0x57, 0x41, 0x85, 0xeb, 0x52, 0xb8, 0x3f,
			0x8a, 0x14, 0x41, 0x66, 0x66, 0x66, 0x66, 0x68, 0x46, 0x48, 0x40, 0x81, 0x7c,
			0xa5, 0x41, 0x3d, 0x00, 0x00, 0x00, 0x48, 0xc3, 0x8a, 0x3c, 0xed, 0x54, 0x03,
			0x3d, 0x48, 0xf4, 0x30, 0x3d, 0x41, 0x41, 0x41, 0x41, 0x9a, 0x99, 0xb9, 0x3f,
			0x00, 0x00, 0x00, 0x00, 0x08, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x54,
			0x94, 0xe6, 0x69
	};

	GNSS myGNSS;
	unsigned char* BytePtr = (unsigned char*)&myGNSS;

	for (int i = 0; i < sizeof(GNSS); i++)
	{
		*(BytePtr + i) = GNSSData[i];
	}

	Console::WriteLine("Northing: {0:F3}; Easting: {1:F3}; Height: {2:F3};", myGNSS.Northing, myGNSS.Easting, myGNSS.Height);

	//Northing: 6245476.840; Easting: 336527.930; Height: 48.550;

	Console::ReadKey();

	return 0;
}